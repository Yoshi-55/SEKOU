<div class="max-w-4xl mx-auto">
  <h1 class="text-3xl font-bold mb-6">プロフィール編集</h1>

  <%= form_with(model: @user, url: profile_path, method: :patch, local: true, class: "space-y-6") do |f| %>
    <% if @user.errors.any? %>
      <div class="bg-red-50 border border-red-200 rounded p-4 mb-6">
        <h2 class="text-red-800 font-bold mb-2"><%= pluralize(@user.errors.count, "件") %>のエラーがあります</h2>
        <ul class="list-disc list-inside text-red-700">
          <% @user.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <!-- 基本情報 -->
    <div class="bg-white rounded-lg shadow p-6">
      <h2 class="text-xl font-bold mb-4">基本情報</h2>
      <div class="space-y-4">
        <div>
          <%= f.label :name, "名前", class: "block text-sm font-medium text-gray-700 mb-1" %>
          <%= f.text_field :name, class: "w-full px-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent", placeholder: "山田 太郎" %>
        </div>

        <div>
          <%= f.label :company_name, "会社名", class: "block text-sm font-medium text-gray-700 mb-1" %>
          <%= f.text_field :company_name, class: "w-full px-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent", placeholder: "株式会社〇〇" %>
        </div>

        <div>
          <%= f.label :prefecture, "都道府県", class: "block text-sm font-medium text-gray-700 mb-1" %>
          <%= f.select :prefecture,
              ["北海道", "青森県", "岩手県", "宮城県", "秋田県", "山形県", "福島県",
               "茨城県", "栃木県", "群馬県", "埼玉県", "千葉県", "東京都", "神奈川県",
               "新潟県", "富山県", "石川県", "福井県", "山梨県", "長野県", "岐阜県",
               "静岡県", "愛知県", "三重県", "滋賀県", "京都府", "大阪府", "兵庫県",
               "奈良県", "和歌山県", "鳥取県", "島根県", "岡山県", "広島県", "山口県",
               "徳島県", "香川県", "愛媛県", "高知県", "福岡県", "佐賀県", "長崎県",
               "熊本県", "大分県", "宮崎県", "鹿児島県", "沖縄県"],
              { include_blank: "選択してください" },
              class: "w-full px-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent" %>
        </div>

        <div>
          <%= f.label :phone, "電話番号", class: "block text-sm font-medium text-gray-700 mb-1" %>
          <%= f.telephone_field :phone, class: "w-full px-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent", placeholder: "03-1234-5678" %>
        </div>

        <div class="pt-2 border-t">
          <p class="text-sm text-gray-600 mb-2">メールアドレス</p>
          <p class="font-medium text-gray-900"><%= @user.email %></p>
          <p class="text-xs text-gray-500 mt-1">※メールアドレスの変更はアカウント設定から行ってください</p>
        </div>
      </div>
    </div>

    <!-- 追加情報 -->
    <div class="bg-white rounded-lg shadow p-6">
      <h2 class="text-xl font-bold mb-4">追加情報</h2>
      <div class="space-y-4">
        <div>
          <%= f.label :company_address, "会社住所（任意）", class: "block text-sm font-medium text-gray-700 mb-1" %>
          <%= f.text_area :company_address, rows: 3, class: "w-full px-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent", placeholder: "東京都渋谷区〇〇1-2-3 〇〇ビル4F" %>
        </div>

        <div>
          <%= f.label :years_of_experience, "経験年数", class: "block text-sm font-medium text-gray-700 mb-1" %>
          <div class="flex items-center gap-2">
            <%= f.number_field :years_of_experience, min: 0, max: 99, class: "w-32 px-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent" %>
            <span class="text-gray-600">年</span>
          </div>
        </div>

        <div>
          <%= f.label :skills, "スキル・資格", class: "block text-sm font-medium text-gray-700 mb-1" %>
          <%= f.text_area :skills, rows: 3, class: "w-full px-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent", placeholder: "例: 型枠大工、鉄筋工、足場組立、一級建築施工管理技士" %>
          <p class="text-sm text-gray-500 mt-1">※保有資格やできる作業をカンマ区切りで記入してください</p>
        </div>

        <div>
          <%= f.label :bio, "自己紹介", class: "block text-sm font-medium text-gray-700 mb-1" %>
          <%= f.text_area :bio, rows: 6, class: "w-full px-4 py-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent", placeholder: "これまでの経験や得意な作業、アピールポイントなどを記入してください" %>
        </div>
      </div>
    </div>

    <!-- アクション -->
    <div class="flex gap-4">
      <%= f.submit "更新する", class: "flex-1 bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-bold cursor-pointer" %>
      <%= link_to "キャンセル", profile_path, class: "px-8 py-3 rounded-lg font-medium text-gray-700 hover:bg-gray-100 border border-gray-300" %>
    </div>
  <% end %>
</div>
